<div class="bg-gray-600 min-h-screen">
  <app-header></app-header>
  <div *ngIf="loading">
    <app-skeleton-loader></app-skeleton-loader>
  </div>
  <div class="flex justify-center" *ngIf="userError">
    <p class="text-3xl text-white">Try another username</p>
  </div>
  <div class="m-5 rounded-xl bg-white w-3/4 mx-auto p-5" *ngIf="!loading && userRepos.length > 0">
    <div class="flex">
      <img [src]="userData.avatar_url" alt="avatar" class="text-black md:w-32 w-12 md:h-32 h-12 rounded-full md:m-5" />
      <div class="md:m-5 ml-2">
        <p class="md:text-2xl text-black flex items-center md:my-2 my-1 font-bold">
          <span class="material-symbols-outlined mr-2">id_card</span>{{userData.name}}
        </p>
        <p class="md:text-xl text-black flex items-center md:my-2 my-1">
          <a [href]="userData.html_url" target="_blank" class="text-blue-400 flex items-center">
            <span class="material-symbols-outlined mr-2">link</span>{{userData.login}}
          </a>
        </p>
        <p class="md:text-xl text-black flex items-center md:my-2 my-1">
          <span class="material-symbols-outlined mr-2">location_city</span>{{userData.location || 'Location not available'}}
        </p>
        <p class="md:text-xl text-black flex items-center md:my-2 my-1">
          <span class="material-symbols-outlined mr-2">public</span>{{userData.public_repos}} Public Repos
        </p>
      </div>
    </div>
    <p class="md:text-xl text-black m-2">{{userData.bio || 'No bio available'}}</p>
    <p class="md:text-xl text-black m-2" *ngIf="userData.twitter_username">
      <a [href]="'https://twitter.com/' + userData.twitter_username" target="_blank" class="text-blue-400">
        Twitter: {{userData.twitter_username}}
      </a>
    </p>
    <hr>
    <div>
      <div class="md:m-4 m-1 flex justify-between items-center">
        <h2 class="md:text-3xl text-base text-black font-extrabold ">Repositories</h2>
          <select class="border border-black text-black rounded-lg md:p-2 ml-2" [(ngModel)]="per_page" id="perPage"(change)="onPerPageChange($event)">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="75">75</option>
            <option value="100">100</option>
          </select>
      </div>
      <!-- repositories -->
      <div *ngIf="userRepos.length > 0">
  <div class="grid grid-cols-1 md:grid-cols-2 md:gap-4 gap-2">
    <div class="md:m-2 my-2 md:p-4 p-2 md:h-40 w-full border border-black rounded-lg" *ngFor="let repo of userRepos">
      <p class="md:text-xl text-pretty text-black hover:text-blue-400 font-bold overflow-hidden text-ellipsis whitespace-nowrap">
        <a [href]="repo.url" target="_blank">
          {{repo.name}}
        </a>
      </p>
      <p class="text-gray-600">{{repo.description || 'No description available'}}</p>
      <div class="flex flex-wrap mt-2">
        <span *ngFor="let topic of repo.topics" class="text-white p-1 rounded bg-blue-400 m-1">
          {{topic || 'No Topics available'}}
        </span>
      </div>
    </div>
  </div>
  <div class="flex justify-center items-center">
    <div class="flex justify-around items-center">
      <button class="bg-blue-600 hover:scale-105 hover:bg-blue-500 text-white mx-2 p-2 rounded-lg mt-4" (click)="prevPage()"
      id="prevButton"
      >Prev</button>
      <h2 class="text-black font-bold text-xl">{{page}}</h2>
      <button class="bg-blue-600 hover:scale-105 hover:bg-blue-500 text-white mx-2 p-2 rounded-lg mt-4" (click)="nextPage()"
      id="nextButton"
        [disabled]="userRepos.length < per_page" [style.opacity]="userRepos.length < per_page ? 0.5 : 1" [style.cursor]="userRepos.length < per_page ? 'not-allowed' : 'pointer'">Next</button>
    </div>
  </div>
</div>

      <div *ngIf="reposError" class="flex justify-center">
        <h2 class="text-2xl font-bold">No Repositories found</h2>
      </div>
    </div>
  </div>
</div>
